"0","#' ## A Regression Model"
"0",""
"0","set.seed(8675309)"
"0","N = 500"
"0","npreds = 5"
"0","X = cbind(1, matrix(rnorm(N * npreds), ncol = npreds))"
"0","beta = runif(ncol(X), -1, 1)"
"0","y = X %*% beta + rnorm(nrow(X))"
"0",""
"0","# least squares loss"
"0","f = function(b) {"
"0","  crossprod(y - X %*% b)[,1]  # if using optimx need scalar"
"0","}"
"0",""
"0",""
"0","lm_par = lm.fit(X, y)$coef"
"0",""
"0","nm_par = nelder_mead2("
"0","  f, "
"0","  runif(ncol(X)),"
"0","  max_iter = 2000,"
"0","  no_improve_thr = 1e-12"
"0",")"
"0",""
"0",""
"0","#' ## Comparison"
"0","#' Compare to `optimx`."
"0",""
"0","opt_par = optimx::optimx("
"0","  runif(ncol(X)),"
"0","  fn = f,"
"0","  method   = 'Nelder-Mead',"
"0","  control  = list("
"0","    alpha  = 1,"
"0","    gamma  = 2,"
"0","    beta   = 0.5,"
"0","    maxit  = 2000,"
"0","    reltol = 1e-12"
"0","  )"
"0",")[1:(npreds + 1)]"
"0",""
"0","rbind("
"0","  lm = lm_par,"
"0","  nm = nm_par,"
"0","  optimx = opt_par,"
"0","  truth  = beta"
"0",")"
"2","Avis : number of columns of result, 6, is not a multiple of vector length 7 of arg 2"
