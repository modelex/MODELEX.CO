"0",""
"0",""
"0",""
"0","#' # Example 2"
"0",""
"0",""
"0","# Add penalty lambda"
"0","knots = 1:7/8"
"0","d2 = data.frame(x = xp)"
"0",""
"0","for (i in c(.1, .01, .001, .0001, .00001, .000001)){"
"0","  # fit penalized regression"
"0","  mod2 = prsFit("
"0","    y = wear,"
"0","    x = x,"
"0","    knots = knots,"
"0","    lambda = i"
"0","  ) "
"0","  # spline choosing lambda"
"0","  Xp = splX(xp, knots) # matrix to map parameters to fitted values at xp"
"0","  LP = Xp %*% coef(mod2)"
"0","  d2[, paste0('lambda = ', i)] = LP[, 1]"
"0","}"
"0",""
"0","#' Examine"
"0","# head(d2)"
"0",""
"0","#' Visualize via ggplot"
"0","d3 = d2 %>%"
"0","  pivot_longer(cols = -x,"
"0","               names_to  = 'lambda',"
"0","               values_to = 'value') %>% "
"0","  mutate(lambda = fct_inorder(lambda))"
"0",""
"0","ggplot(d3) +"
"0","  geom_point(aes(x = x, y = wear), col = '#FF5500', data = d) +"
"0","  geom_line(aes(x = x, y = value), col = ""#00AAFF"") +"
"0","  facet_wrap(~lambda) +"
"0","  theme_minimal()"
