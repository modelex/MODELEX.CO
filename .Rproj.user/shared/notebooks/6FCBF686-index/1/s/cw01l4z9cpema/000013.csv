"0","# add covariates ----------------------------------------------------------"
"0",""
"0","d = gamSim(eg=7, n=10000)"
"1","Gu & Wahba 4 term additive model, correlated predictors
"
"0","X_ = as.matrix(d[,2:5])"
"0","y = d[,1]"
"0",""
"0","n_nodes = c(10, 25, 100, 250, 500, 1000)"
"0","test = lapply(n_nodes, function(n) elm(X_, y, n_hidden=n))       # this will take a few seconds"
"0","final_n = which.min(sapply(test, function(x) x$loss))"
"0","best = test[[final_n]]"
"0","# str(best)"
"0","qplot(best$fit[,1], y, alpha=.2)"
